<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
            <title>测试</title>
            <meta name="viewport"
                content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
                <meta name="apple-mobile-web-app-capable" content="yes">
                    <meta name="apple-mobile-web-app-status-bar-style" content="black">
                        
                        <!--标准mui.css-->
                        <link rel="stylesheet" href="css/mui.min.css">
                            <style>
                                input, button, .mui-btn {
                                    margin-top: 10px;
                                    margin-left: 10px;
                                }
                            
                            
                            
                            
                            
                                </style>
    </head>
    
    <body>
        <div class="mui-content">
            <div class="mui-content-padded">
                <button type="button" class="mui-btn mui-btn-outlined" onclick="closewindow()">
                    关闭页面
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined" onclick="userChoose()">
                     人员选择
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="setTitlebarVisible()">
                    显示标题栏
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="setTitlebarInvisible()">
                    隐藏标题栏
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="setTitlebarBgColor()">
                    设置标题栏背景颜色
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="setTitlebarBgImage()">
                    设置标题栏背景图片
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined" onclick="setTitleBarTextView()">
                    设置修改标题
                </button>
                
                
                </br>
                </br>
                
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="registerBack()">
                    绑定Back按钮
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="unRegisterBack()">
                    解绑Back按钮
                </button>
                
                
                </br>
                </br>
                
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="registerRightBtn()">
                    设置标题栏右边按钮图片并触发js事件
                </button>
                
                
                </br>
                </br>
                
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="startWindow()">
                    新建WebViewActivity
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="skipWindow()">
                    新建WebViewActivity并结束当前activity
                </button>
                
                
                </br>
                </br>
                
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined" onclick="getUser()">
                    获得用户信息
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined" onclick="getToken()">
                    获得Token
                </button>
                
                </br>
                </br>
                
                
                <button type="button" class="mui-btn mui-btn-purple mui-btn-outlined" onclick="getImages()">
                    选择本地图片
                </button>
                <button type="button" class="mui-btn mui-btn-purple mui-btn-outlined" onclick="getVideos()">
                    选择本地视频
                </button>
                <button type="button" class="mui-btn mui-btn-purple mui-btn-outlined" onclick="getCamera()">
                    调用系统相机
                </button>
                
                </br>
                </br>
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="downloadFile()">
                    文件下载
                </button>
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"
                    onclick="uploadFile()">
                    文件上传
                </button>
                
                </br>
                </br>
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined" onclick="toastShow()">
                    Toast显示
                </button >
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined"  onclick="alertShow()">
                    Alert弹窗触发Js事件
                </button>
                
                </br>
                </br>
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined" onclick="progressShow()">
                    请求显示
                </button>
                
                <button type="button" class="mui-btn mui-btn-primary mui-btn-outlined" onclick="progressCancle()">
                    请求取消
                </button>

                
                
            </div>
            
        </div>
    </body>
    <script src="js/mui.min.js"></script>
    <script>
        mui.init({
                 swipeBack:true //启用右滑关闭功能
                 });
                 
                 function closewindow() {
                     bpmbridget.call("close");
                 }
    
                 function setTitle() {
                    bpmbridget.call("setTitle",{title: "我被修改了"});
                }
               //人员选择
                  function userChoose(){
                      bpmbridget.call("userChoose",{selectNum: 5, users:[{id:"1",name:"张三"},{id:"2",name:"李四"}]}, function(result){
                                    alert(result);
                                      });
                  
                 }
    
                // 显示标题栏
                function setTitlebarVisible() {
                    bpmbridget.call("setTitlebarVisible",{visible:"YES"}, function(result){
                                                                               alert(result);
                                                                               });
                     }
                 // 隐藏标题栏
                 function setTitlebarInvisible() {
                         bpmbridget.call("setTitlebarVisible",{visible:"NO"}, function(result){
                                                                               alert(result);
                                                                               });
                     }
                // 设置标题栏背景颜色
                function setTitlebarBgColor() {
                        bpmbridget.call("setTitlebarBgColor",{bgColor: "#3892FF"}, function(result){
                                                                             alert(result);
                                                                             });
                }
                                                                         
                 // 设置标题栏背景图片
                 function setTitlebarBgImage() {
                         bpmbridget.call("setTitlebarBgImage",{bgImgUrl: "https://58.215.198.210:9997/bpmapp/bpm_toolbar_bg.png"}, function(result){
                                                 alert(result);
                                                 });
                 }
    
                 // 设置标题
                 function setTitleBarTextView() {
                         bpmbridget.call("setTitlebarTextView",{title: "XXXX", fontSize: "19", fontColor: "#3892FF"}, function(result){
                                         alert(result);
                                         });
                 }
    
                //设置标题栏右边按钮图片并触发js事件
                function registerRightBtn() {
                    bpmbridget.call("bindRightBtn", {imageUrl: "http://58.215.198.212:8080/images/logo/logo.png",callback: "rightJs"}, function(result) {
                                    alert(result);
                                    });
                }
                function rightJs() {
                    alert(1);
                }
    
                 // 新建窗口
                 function startWindow() {
                         bpmbridget.call("startWindow",{url: "https://58.215.198.210:9997/bpmapp/newjswebview", title: "hello"});
                 }
    
                 // 新建窗口并结束当前窗口
                 function skipWindow() {
                         bpmbridget.call("skipWindow",{url: "https://58.215.198.210:9997/bpmapp/newjswebview", title: "hello"});
                 }
    
                function registerBack() {
                    bpmbridget.call("bindBackBtn", {callback: "tback"}, function(result) {
                                    alert(result);
                                    });
                }
    
                function tback() {
                    alert(1);
                }
    
                function unRegisterBack() {
                    bpmbridget.call("unbindBackBtn", function(result) {
                                    alert(result);
                                    });
                }
    
                //[sync] 获得当前用户信息
                function getUser() {
                    bpmbridget.call("getUser", function(result){
                                    alert(result);
                                    });
                }
    
                //[sync] 获得Token
                function getToken() {
                    bpmbridget.call("getToken", function(result){
                                    alert(result);
                                    });
                }
    
                // 选择本地图片
                function getImages() {
                    bpmbridget.call("getImages", {selectNum: 3}, function(result) {
                                    alert(result);
                                    });
                }
    
                // 选择本地视频
                function getVideos() {
                    bpmbridget.call("getVideos", {selectNum: 3}, function(result) {
                                    alert(result);
                                    });
                }
    
                // 调用本地相机
                function getCamera() {
                    bpmbridget.call("getCamera", function(result){
                                    alert(result);
                                    });
                }
    
                // 文件下载
                function downloadFile() {
                    bpmbridget.call("downloadFile",{attachmentId: "ff8080815f7aae2e015f7bbb33c100cc", attachmentName: "3.xlsx", autoOpen: "YES"}, function(result){
                                    alert(result);
                                    });
                }
    
                // 文件上传    
               function uploadFile(){
                  //  bpmbridget.call("uploadFile",
                   // {filePath: "assets-library://asset/asset.JPG?id=CF973123-9D96-48F6-BB24-B3B3501F9526&ext=JPG"},
                   // function(result){ alert(result); }); //真机png
                bpmbridget.call("uploadFile",
                                   {filePath: "assets-library://asset/asset.HEIC?id=D116AFB5-32E6-4057-A3F6-B79988F6537F&ext=HEIC"},
                              function(result){ alert(result); }); //真机2
                  //  bpmbridget.call("uploadFile", {filePath: "assets-library://asset/asset.MOV?id=660B6832-B1DD-4561-87CD-9255B92B57FF&ext=MOV"},
                                                 //  function(result){ alert(result); });//真机视频
                  // bpmbridget.call("uploadFile",
                                    // {filePath: "assets-library://asset/asset.JPG?id=ED7AC36B-A150-4C38-BB8C-B6D696F4F2ED&ext=JPG"},
                                    //function(result){ alert(result); }); //模拟器
                  // bpmbridget.call("uploadFile",{filePath: " assets-library://asset/asset.MOV?id=660B6832-B1DD-4561-87CD-9255B92B57FF&ext=MOV"},
                                    //  function(result){ alert(result); });
                                    
                }

    
                //Toast显示  toastType有五种类型：info,success,error,warning,normal
                function toastShow() {
                    bpmbridget.call("toastShow",{toast:"5",toastType:"info"});
                }
    
    
                //Alert确认框触发js事件
                function alertShow() {
                    bpmbridget.call("bindAlert", {dialogTitle:"标题",dialogInfo:"内容",callback: "toastShow"}, function(result) {
                                    alert(result);
                                    });
                }
    
                
                //Alter确认框显示AL
                //  function dialogShowAl(){
                //   bpmbridget.call("dialogShowAl",{dialogTitle:"标题",dialogInfo:"内容"},function(result){
                //              alert(result);
                //    });
                //   }
                
                //Alter确认框显示AC type:restartAc,startAc
                //弹框：新建窗体startWindow，新建窗体并结束当前窗体skipWindow
                // function dialogShowAc(){
                //   bpmbridget.call("dialogShowAc",{dialogTitle:"标题",dialogInfo:"内容",windowUrl: "https://58.215.198.210:9997/bpmapp/newjswebview.html",windowTitle: "hello",windowType:"startWindow"});
                //  }
                
                function progressShow(){
                    bpmbridget.call("progressShow");
                }
    
                function progressCancel(){
                    bpmbridget.call("progressCancel");
                }
    
               
               //获取人员选择数据
               function showUserChoose(r,l){
                       var json = eval('(' + l + ')');//jsons数据
                   bpmbridget.call("userChoose",{selectNum: r, users:json}, function(result){
                                   alert(result);
                                   });
                  
                       }
        </script>
</html>
